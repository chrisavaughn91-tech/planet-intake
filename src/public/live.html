<!doctype html>
<meta charset="utf-8">
<title>Planet Intake — Live</title>
<style>
  body{font:14px system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:0;padding:16px 20px;}
  h1{margin:0 0 12px;}
  #log{white-space:pre-wrap;font-family:ui-monospace, SFMono-Regular, Menlo, monospace;border:1px solid #ddd;border-radius:10px;padding:12px;height:72vh;overflow:auto;background:#fafafa}
  .row{margin:0 0 4px}
</style>
<h1>Planet Intake — Live</h1>
<div id="log"></div>
<script>
  const log = document.getElementById('log');
  const es = new EventSource('/events');
  const append = (o) => {
    const line = document.createElement('div');
    line.className = 'row';
    const t = new Date().toLocaleTimeString();
    line.textContent = `[${t}] ${JSON.stringify(o)}`;
    log.appendChild(line);
    log.scrollTop = log.scrollHeight;
  };
  es.onmessage = (e) => {
    try { append(JSON.parse(e.data)); } catch { append({raw:e.data}); }
  };
  es.onerror   = () => append({type:'error', ts: Date.now()});
</script>
